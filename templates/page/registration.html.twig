{% extends 'base.html.twig' %}

{% block title %}Registration{% endblock %}

{% block content %}
    {#<script>#}
        {#window.fbAsyncInit = function() {#}
            {#// init the FB JS SDK#}
            {#FB.init({#}
                {#appId      : '561528541010621',                        // App ID from the app dashboard#}
                {#//channelUrl : '//yourdomain.com/channel.html',      // Channel file for x-domain comms#}
                {#cookie     : true,#}
                {#version    : 'v3.2',#}
                {#status     : true,                                 // Check Facebook Login status#}
                {#xfbml      : true                                  // Look for social plugins on the page#}
            {#});#}
        {#};#}

        {#// Load the SDK asynchronously#}
        {#(function(d, s, id){#}
            {#var js, fjs = d.getElementsByTagName(s)[0];#}
            {#if (d.getElementById(id)) {return;}#}
            {#js = d.createElement(s); js.id = id;#}
            {#js.src = "//connect.facebook.net/en_US/all.js";#}
            {#fjs.parentNode.insertBefore(js, fjs);#}
        {#}(document, 'script', 'facebook-jssdk'));#}

        {#function fb_login() {#}
            {#FB.getLoginStatus(function(response) {#}
                {#if (response.status === 'connected') {#}
                    {#// connected#}
                    {#alert('Already connected, redirect to login page to create token.');#}
                    {#document.location = "{{ url("hwi_oauth_service_redirect", {service: "facebook"}) }}";#}
                {#} else {#}
                    {#// not_authorized#}
                    {#FB.login(function(response) {#}
                        {#if (response.authResponse) {#}
                            {#document.location = "{{ url("hwi_oauth_service_redirect", {service: "facebook"}) }}";#}
                        {#} else {#}
                            {#alert('Cancelled.');#}
                        {#}#}
                    {#}, {scope: 'email'});#}
                {#}#}
            {#});#}
        {#}#}
    {#</script>#}
    {#<div id="fb-root"></div>#}


    {#<h1 class="title">Hello {{ name }}!</h1>#}

    {#<a href="{{ path('_demo_secured_hello_admin', { 'name': name }) }}">Hello resource secured for <strong>admin</strong> only.</a>#}

    {#<p>#}
        {#<a href="#" onclick="fb_login();">Facebook Connect Button (Dialog)</a>#}
    {#</p>#}

    {# Bonus: Show all available login link in HWIOAuthBundle #}
    {#{% render(controller('HWIOAuthBundle:Connect:connect')) %}#}

    <div class="col-md-5">
        <h1>Registration</h1>
        <div>
            {% for flash in app.session.flashbag.get('success') %}
                <div class="alert alert-success">{{ flash }}</div>
            {% endfor %}
        </div>
        {# templates/page/registration.html.twig #}

        {{ form_start(reg_form) }}
        {{ form_row(reg_form.login) }}
        {{ form_row(reg_form.password) }}
        {{ form_row(reg_form.email) }}
        {{ form_row(reg_form.companyTitle) }}
        {{ form_row(reg_form.phoneNumber) }}
        {{ form_row(reg_form.name) }}
        {{ form_row(reg_form.address) }}
        <div class="text-right">
            <button class="btn btn-default" type="reset">Clear</button>
            <button class="btn btn-primary" type="submit">Register!</button>
        </div>
        {{ form_end(reg_form) }}
        <br>

        <a href="{{ path('hwi_oauth_service_redirect', {'service': 'facebook' }) }}">Continue with Facebook</a>

        {#<a href="{{ path('hwi_oauth_service_redirect', {'service': 'google' }) }}">#}
            {#<span>Login with Google</span>#}
        {#</a>#}

        {#<div class="fb-login-button" data-size="medium" data-button-type="continue_with" data-auto-logout-link="false" data-use-continue-as="false" ></div>#}

        {#<fb:login-button#}
        {#scope="public_profile, email, user_hometown"#}
        {#onlogin="checkLoginState();"#}
        {#data-size="large"#}
        {#data-button-type="continue_with">#}
        {#</fb:login-button>#}

        {#<div class="fb-login-button" data-size="medium" data-button-type="continue_with" data-auto-logout-link="false" data-use-continue-as="false" ></div>#}
    </div>
{% endblock %}